*******       OpenAPI   ************

OpenAPI (formerly Swagger) is a standard specification used to describe REST APIs.
Key Points

Defines endpoints, request/response formats, parameters, headers, security, etc.
Written in YAML or JSON.
Helps automate:
API documentation
Client SDK generation
Server stub generation
API testing (Postman, Rest Assured, Karate, etc.)
Temenos exposes its services through the Interaction Framework (IF) or REST services, and each service has an OpenAPI (Swagger) specification that describes:
API endpoint
Request/response structure
Parameters
Authentication
Error codes
Field validation rules
T24 function to trigger (e.g., enrichment, commit, COB, etc.)
* This is a blueprint for QA to understand the T24 service without reading COB tables or internal code.

Step 1: Read the OpenAPI Spec  --> Understand all fields, constraints, and sample payloads.
Step 2: Prepare Test Payload --> Create valid/invalid payloads based on OpenAPI.
Step 3: Trigger T24 API --> Call the REST API using Postman/automation scripts.
Step 4: Validate API Response
Check: HTTP code, Error messages, T24 transaction ID, Business rule execution
Step 5: Validate T24 Database --> In AA/AC/FT tables after commit.
Step 6: Validate End-to-End Flow  --> T24 â†’ Middleware â†’ Channels â†’ Notifications â†’ Accounting entries.

T24 Component Testing
Temenos T24 has modules:
AA (Arrangement Architecture)
CB (Core Banking)
COB (Close of Business)
FT (Funds Transfer)
PM (Payments)
LC (Lending)


**************   AVRO  **********************
It is used in the integration layer when T24 communicates with:
Kafka
Enterprise Service Bus (ESB)
Data Lake / Analytics
Downstream systems (Cards, AML, CRM, Notifications)
ðŸ‘‰ T24 â†’ Middleware â†’ Kafka (Avro messages)

Flow  --->
API call hits T24 (OpenAPI)
T24 validates & commits data
Event generated
Event serialized in Avro
Published to Kafka topic
Consumers read Avro event

Where AVRO is used in T24  -->
ðŸ“Œ 1. Customer Events -> Customer Created , KYC Updated , CIF Modified
ðŸ“Œ 2. Account Events --> Account Opened , Balance Updated , Account Closed
ðŸ“Œ 3. Transaction Events --> Funds Transfer , Card transaction , Loan disbursement
ðŸ“Œ 4. Loan & AA Events --> Loan approved , Installment posted , Loan closed


JUnit Test
  â†“
OpenAPI Generated Client
  â†“
T24 API
  â†“ (on success)
Kafka Topic (Avro event)






*******************          T24 service configuration records.   **************


TSA.SERVICE,
AUTO/I/PROCESS,
AUTOMATION01/******/SG0020001,
HKD^JBWW.B.DX.FXOPTIONS.PROCESS,
SERVICE.CONTROL::=AUTO


Note --> â€œThis background process is allowed to run automatically (AUTO) without manual intervention.â€
Without this:
Your OFS automation will fail
Trades will be created but not processed
Accounting / lifecycle will not move forward

| Part                        | Meaning                                     |
| --------------------------- | ------------------------------------------- |
| TSA.SERVICE                 | T24 table that controls background services |
| AUTO/I/PROCESS              | Type of service (Automatic Input / Process) |
| AUTOMATION01                | User used to run automation                 |
| SG0020001                   | Company/booking entity                    |
| HKD                         | Currency                                    |
| JBWW.B.DX.FXOPTIONS.PROCESS | Actual business engine                      |
| SERVICE.CONTROL::=AUTO      | Enable auto execution                       |


T24 is strict about: Currency, Product, Process type, Company

FX OPTIONS Processing -->   JBWW.B.DX.FXOPTIONS.PROCESS    ---> 
ðŸ‘‰ Handles:
FX Option trade processing
Lifecycle events
Valuation triggers

FX STRUCTURES Processing  --> FX STRUCTURES Processing  ---> 
ðŸ‘‰ Handles:
Structured FX products
Combination instruments
Strategy-level processing

FX CASH Processing -->  JBWW.D.FX.CASH.PROCESS --> 
ðŸ‘‰ Handles:
Cash leg settlements
Debit/credit postings
Nostro movements

OFS Message Service -->  BNK^OFS.MESSAGE.SERVICE -->
It allows:
OFS messages to be accepted
Requests to be processed
Responses to be returned

SERVICE.CONTROL::=AUTO -->  â€œRun this service automatically in background when needed.â€
MANUAL â†’ someone must trigger it
STOPPED â†’ nothing happens
AUTO â†’ perfect for automation

SERVER.NAME=NULL --> 
Simple meaning:
Service can run on any available T24 server
No server pinning
Better for automation & load

automation user AUTOMATION01  ---> 
Because:
Automation should not use real users
Easier auditing
Controlled permissions






STEP 0ï¸âƒ£ Preconditions (Before Automation Runs)
These must already be true, otherwise nothing works:
TSA.SERVICE records = AUTO âœ…
Automation user = AUTOMATION01 âœ…
Reference data exists (Customer, Portfolio, Currency) âœ…
STEP 1ï¸âƒ£ Automation Sends OFS Message
Your automation sends an OFS message like:
OFS.MESSAGE:
APPLICATION=FXOPTION
FUNCTION=I
FIELDS=...
* FXOPTION â†’ Product
  I â†’ Input (create trade)

STEP 2ï¸âƒ£ OFS MESSAGE SERVICE PICKS IT UP
Service involved:
BNK^OFS.MESSAGE.SERVICE
What it does:
Accepts the OFS message
Authenticates AUTOMATION01
Routes request to correct the T24 application

STEP 3ï¸âƒ£ Trade Record Is Created (Input Stage)
Now T24:
Creates FX Option record
Assigns contract ID
Saves basic trade data

STEP 4ï¸âƒ£ FX OPTION PROCESS ENGINE STARTS
Service triggered: JBWW.B.DX.FXOPTIONS.PROCESS
This is where real work starts:
Validations
Lifecycle setup
Internal status updates
If this service is not AUTO: Trade stays in limbo, Status looks incomplete

STEP5ï¸âƒ£ FX STRUCTURE PROCESS (If Applicable)
Service:JBWW.B.SY.FXSTRUCTURES.PROCESS
Triggered when:
Structured FX product
Strategy / multi-leg trades

What it does: Breaks trade into components
Links structure hierarchyðŸ‘‰ Even plain FX options may touch this internally.

STEP 6ï¸âƒ£ FX CASH PROCESS (Accounting)
Service: JBWW.D.FX.CASH.PROCESS
This is an accounting engine ðŸ§¾
It:
Post debit/credit entries
Updates accounts
Creates settlement legs
ðŸ’¡ This is what automation later validates via enquiries.

STEP 7ï¸âƒ£ Internal Status = COMPLETED
At this point: Trade status = Active
Accounting posted
Lifecycle ready
ðŸ‘‰ From an automation perspective: Business flow is completed

STEP 8ï¸âƒ£ Outbound Events (Optional â€“ TIS / Kafka)
If TIS is enabled:
T24 publishes outbound messages
Kafka topics get populated
Your automation may:
Consume Kafka
Validate payload
Match trade IDs

STEP 9ï¸âƒ£ Automation Validates Results
Now your validators run:
Examples:
OFS Enquiry:
Trade exists
Correct status
Accounting enquiry:
Debit / Credit posted
Message validation: Kafka payload correct
ðŸ‘‰ Same scenario, different validator implementations.

ðŸ” Whole Flow in One Line
OFS â†’ Message Service â†’ Trade Input â†’ FX Engine â†’ Accounting â†’ Validation

| Service              | Why Needed               |
| -------------------- | ------------------------ |
| OFS.MESSAGE.SERVICE  | Accepts automation input |
| FXOPTIONS.PROCESS    | Processes trade          |
| FXSTRUCTURES.PROCESS | Handles structure        |
| FX.CASH.PROCESS      | Posts accounting         |


 ************************* TIS (Temenos Integration Service) **************************

TIS = Message bridge between T24 and other systems
Think of TIS like a post office ðŸ“®: Systems send messages to T24, T24 sends messages out
TIS handles format, routing, retry, and reliability

ðŸ‘‰ T24 never communicates directly with Kafka / upstream applications.
ðŸ‘‰ Everything goes through TIS.

Upstream System â†’ Kafka â†’ TIS â†’ T24 -> T24 â†’ TIS â†’ Kafka â†’ Downstream System
Responsibilities of TIS : 1. Message Intake  , 2. Validation ,  3. Transformation ,  4. Routing ,  5. Outbound Publishing 
| Test Type         | Purpose                                    |
| ----------------- | ------------------------------------------ |
| Inbound TIS test  | Validate T24 can process upstream messages |
| Outbound TIS test | Validate messages sent to downstream       |

Inbound Validation --> Message accepted, Trade created, Correct mapping,No error topics
Outbound Validation --> Correct topic published , Correct schema version ,Business fields correct , Correlation ID matches

ðŸ‘‰ OFS = unit-level testing
ðŸ‘‰ TIS = integration-level testing


| Topic Type     | Purpose          |
| -------------- | ---------------- |
| Inbound topic  | Upstream â†’ T24   |
| Outbound topic | T24 â†’ Downstream |
| Error topic    | Failed messages  |
| Retry topic    | Retried messages |

| Issue                             | Meaning                   |
| --------------------------------- | ------------------------- |
| Message in error topic            | Schema / mapping issue    |
| Trade not created                 | TIS â†’ T24 mapping failure |
| Kafka consumed but nothing in T24 | OFS rejected              |
| Duplicate messages                | Retry logic               |


How You Automate TIS (Practically)
Inbound Automation --> 
Create Kafka producer
Build AVRO payload
Publish to topic
Wait / poll
Validate trade in T24
Check error topic = empty

Outbound Automation --> 
Trigger trade in T24
Start Kafka consumer
Capture message
Validate schema + payload


| Environment | Implementation |
| ----------- | -------------- |
| AT          | OFS            |
| SIT         | Kafka â†’ TIS    |
| E2E         | UI â†’ TIS       |

| OFS           | TIS               |
| ------------- | ----------------- |
| Direct T24    | Integration layer |
| Very fast     | Slower (Kafka)    |
| AT testing    | SIT / Integration |
| No dependency | Kafka dependency  |

Common TIS Failures
Error topic â†’ schema/mapping issue
Kafka consumed but no trade â†’ OFS rejected
Trade exists but no outbound â†’ event config issue
Duplicate messages â†’ retry triggered

Golden Debug Order :
1. Kafka topic
2. TIS logs
3. OFS logs
4. T24 enquiry


